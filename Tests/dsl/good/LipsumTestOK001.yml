# SETUP
-
    type: content_type
    mode: create
    content_type_group: 1
    identifier: klib_test_001
    name: Kaliop LIpsum Bundle Test Class 1
    name_pattern: '<name>'
    is_container: true
    always_available: true
    attributes:
        -
            type: ezstring
            name: Name
            identifier: name
        -
            type: ezbinaryfile
            name: File
            identifier: file
        -
            type: ezemail
            name: Email
            identifier: email
        -
            type: ezfloat
            name: Float
            identifier: float
            validator-configuration:
                FloatValueValidator: { minFloatValue: 0, maxFloatValue: 999999 }
        #-
        #    type: ezimage
        #    name: Image
        #    identifier: image
        -
            type: ezinteger
            name: Integer
            identifier: integer
        -
            type: eztime
            name: Time
            identifier: time
        -
            type: ezxmltext
            name: Body
            identifier: body

# EXECUTE
-
    type: loop
    repeat: 5
    steps:
        -
            type: content
            mode: create
            content_type: klib_test_001
            parent_location: 2
            attributes:
                name: " Test item [loop:iteration] - [faker:sentence(3)]"
            references:
                -
                    attribute: location_id
                    identifier: parent_folder_loc
                    overwrite: true
        -
            type: loop
            repeat: 3
            steps:
                -
                    type: content
                    mode: create
                    content_type: klib_test_001
                    parent_location: reference:parent_folder_loc
                    attributes:
                        name: "Test item [faker:uuid]"
                        body: "faker:randomXmlText()"
                        email: "faker:email"
                        file: "[faker:pdfFile()]"
                        float: "faker:randomFloat(10, 0, 999999)"
                        integer: "faker:randomDigit"
                        time: "@[faker:unixTime]"

# VERIFY
-
    type: content
    mode: load
    match:
        content_type: klib_test_001
    references:
        contents_count: count
-
    type: assert
    target: reference
    identifier: reference:contents_count
    test:
        equals: 20

# TEARDOWN
-
    type: content
    mode: delete
    match:
        content_type: klib_test_001

-
    type: content_type
    mode: delete
    identifier: klib_test_001
